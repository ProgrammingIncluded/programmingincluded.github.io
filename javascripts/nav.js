const LIMIT=500,MAX_MOBILE_WIDTH=1080;function toggleOnSideBar(e,t){$(window).width()<MAX_MOBILE_WIDTH||(e?anime({targets:".article-layout-sidebar",opacity:1,duration:t}):anime({targets:".article-layout-sidebar",opacity:.5,duration:t}))}function createTableOfContents(){let a=[1,2,3,4,5,6],e=null,t=(($(window).width()<MAX_MOBILE_WIDTH?(e=$(".mid-bar-island .table-of-contents").first(),$(".side-bar-island .table-of-contents").hide(),$("#table-of-contents-header")):(e=$(".side-bar-island .table-of-contents").first(),$(".mid-bar-island"))).hide(),e.text(""),[]),i=(a.forEach(e=>{t.push(".article-layout-main-body h"+e)}),[]);if($(t.join(", ")).each(function(){for(let e=0;e<a.length;++e){var t=a[e];if($(this).is("h"+t)){i.push([t,$(this).text(),$(this)]);break}}}),0==i.length)e.hide(),$("#table-of-contents-header").hide(),$(".mid-bar-island").hide();else{let t=i.reduce((e,t)=>Math.min(e,t[0]),a.length+1)-1,r=(i=(i=i.map(e=>[e[0]-t,e[1],e[2]])).filter(e=>e[0]<=3),[e]);i.forEach(e=>{var t=e[0],a=e[1];let i=e[2];if(r.length>=t+1)r=r.slice(0,t+1);else if(r.length<t+1){var n=t-r.length+1,o=null;for(let e=1;e<1+n;++e){var o=r[r.length+e-2],l=$("<ul>");o.append(l),r.push(l)}}e=r[t],t=$("<li>"),a=$("<a>",{text:a});a.click(()=>{i[0].scrollIntoView(),anime({targets:i[0],opacity:[{value:.2,duration:400},{value:1,duration:400}],easing:"linear"})}),t.append(a),e.append(t)})}}$(document).ready(()=>{createTableOfContents();let a=$(".side-bar-island"),i=a.offset().top;if($(window).width()>MAX_MOBILE_WIDTH){a.css({position:"fixed"});let t=$(document).scrollTop();var n=t>LIMIT,o=!1;$(window).on("scroll",()=>{var e;t=$(document).scrollTop(),!n&&t<=LIMIT?(e=-t+i,a.css({top:e+"px"})):!o&&n&&t<2?n=!1:!o&&!n&&t>LIMIT&&(o=n=!0,anime({targets:a[0],top:i,easing:"easeOutQuad",duration:500,complete:e=>{o=!1}})),toggleOnSideBar(t<=LIMIT,1e3)})}$(".article-layout-sidebar").hover(()=>{$(document).scrollTop()>LIMIT&&toggleOnSideBar(!0,2e3)},()=>{$(document).scrollTop()>LIMIT&&toggleOnSideBar(!1,2e3)})});